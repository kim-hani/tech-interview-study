# 프로세스와 스레드

---

## 1. 프로세스(Process)란?

프로세스는 **실행 중인 프로그램(Program in Execution)** 을 의미한다.  
[운영체제](./운영체제란%20무엇인가%3F.md)는 프로세스를 관리하여 CPU, 메모리, 입출력 장치 등의 자원을 효율적으로 배분한다.  

### 프로세스의 특징
- 프로그램이 실행되면 운영체제로부터 **독립적인 메모리 공간**을 할당받는다.
- 하나의 프로세스는 최소 **코드(Code), 데이터(Data), 스택(Stack), 힙(Heap)** 영역을 가진다.
- 프로세스는 [**PCB(Process Control Block)**](./PCB와%20문맥교환.md)라는 자료구조로 관리되며, 프로세스의 상태, 레지스터 값, 메모리 정보 등을 포함한다.

### 프로세스의 메모리 구조
1. **코드(Code) 영역**  
   - 실행할 프로그램의 명령어(기계어 코드)가 저장되는 공간  
   - 읽기 전용(Read-only) 속성을 가지며, 보통 모든 프로세스가 동일한 코드 영역을 공유한다.  

2. **데이터(Data) 영역**  
   - 전역 변수(Global variable), 정적 변수(Static variable)가 저장되는 공간  
   - 프로그램 시작과 동시에 할당되고, 종료될 때까지 유지된다.  

3. **힙(Heap) 영역**  
   - 동적 할당 메모리가 저장되는 공간 (`malloc`, `new` 등)  
   - 런타임 시 크기가 가변적이며 필요에 따라 확장/해제된다.  

4. **스택(Stack) 영역**  
   - 함수 호출 시 지역 변수, 매개변수, 반환 주소가 저장되는 공간  
   - 후입선출(LIFO) 방식으로 관리되며 함수 종료 시 해제된다.  

---

## 2. 스레드(Thread)란?

스레드는 프로세스 내부에서 실행되는 **실행 단위의 흐름**이다.  
하나의 프로세스는 여러 개의 스레드를 가질 수 있으며, 이를 **멀티스레드(Multi-thread)** 라 한다.  

### 스레드의 특징
- 프로세스 내 자원(코드, 데이터, 힙)을 공유한다.
- 독립적으로 스택(Stack)과 레지스터를 가진다.
- [**문맥 교환(Context Switching)**](./PCB와%20문맥교환.md) 비용이 프로세스 간 교환보다 작다.

---

## 3. 프로세스와 스레드의 차이점

| 구분 | 프로세스 | 스레드 |
|------|----------|---------|
| 정의 | 실행 중인 프로그램 | 프로세스 내 실행 흐름 |
| 메모리 | 독립된 메모리 영역 할당 (Code/Data/Stack/Heap) | Code/Data/Heap 공유, Stack만 독립 |
| 자원 공유 | 기본적으로 불가 | 같은 프로세스 내에서는 공유 가능 |
| 생성 비용 | 상대적으로 큼 | 상대적으로 작음 |
| 전환 비용 | 큼 | 적음 |
| 안정성 | 독립성 보장 → 안정적 | 하나의 스레드 오류 시 전체 프로세스에 영향 |

---

## 4. 프로세스의 상태 (Process State)

프로세스는 실행 중에 여러 상태를 오간다.
![프로세스 상태 다이어그램](https://user-images.githubusercontent.com/59963677/139288242-13e5faa3-9363-4387-8e4f-fa4f85af718a.png
)- **생성(New)** : 프로세스가 생성되는 중  
- **준비(Ready)** : 실행할 준비가 되어 CPU를 기다리는 상태  
- **실행(Running)** : CPU를 점유하여 명령어를 수행하는 상태  
- **대기(Waiting/Blocked)** : 입출력 완료 등 특정 이벤트를 기다리는 상태  
- **종료(Terminated)** : 실행이 끝난 상태  

---

## 5. 멀티프로세스와 멀티스레드

### 멀티프로세스
- 여러 개의 독립된 프로세스를 동시에 실행하는 방식  
- 장점: 프로세스 간 독립성이 보장되어 안정성이 높음  
- 단점: 프로세스 간 통신(IPC)이 복잡하고 오버헤드가 큼  

### 멀티스레드
- 하나의 프로세스 내에서 여러 스레드를 병렬적으로 실행하는 방식  
- 장점: 자원 공유가 쉬워 효율적이고 전환 비용이 적음  
- 단점: 하나의 스레드 오류가 전체 프로세스에 영향을 줄 수 있음  

---

## 6. 정리

- **프로세스**: 실행 단위 (Code/Data/Heap/Stack 포함)  
- **스레드**: 프로세스 내 실행 흐름 단위  
- 프로세스는 [PCB](./PCB와%20문맥교환.md)로 관리된다.  
- 스레드의 [문맥 교환](./PCB와%20문맥교환.md)은 프로세스보다 비용이 작다.  
- **멀티프로세스**: 안정성 ↑, 비용 ↑  
- **멀티스레드**: 효율성 ↑, 안정성 ↓  
